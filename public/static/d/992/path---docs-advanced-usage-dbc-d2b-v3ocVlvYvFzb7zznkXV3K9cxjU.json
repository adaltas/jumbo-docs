{"data":{"markdownRemark":{"html":"<h1>Advanced usage</h1>\n<h2>Versions and repositories URLs</h2>\n<p>Since <a href=\"../../overview/versions\">v0.4.3</a>, Jumbo supports fine grained versions and repositories management. All configurations are done through files called <code class=\"language-text\">versions.json</code>. When upgrading to v0.4.3, the default <code class=\"language-text\">verions.json</code> will be added to the <code class=\"language-text\">~/.jumbo</code> directory, and an empty <code class=\"language-text\">versions.json</code> file to any new cluster's root directory (e.g. <code class=\"language-text\">~/.jumbo/newcluster/versions.json</code>).</p>\n<h3>How does it work?</h3>\n<p><code class=\"language-text\">versions.json</code> work in \"cascading\" mode, with priority to the cluster level <code class=\"language-text\">versions.json</code>. If a version definition is not found in this files, the global version set in <code class=\"language-text\">~/.jumbo/versions.json</code> will be used.</p>\n<p>In <code class=\"language-text\">versions.json</code> files, you will find 3 sets of items:</p>\n<ul>\n<li><code class=\"language-text\">services</code> - Jumbo services not part of a specific Big Data platform (e.g. POSTGRESQL or AMBARI),</li>\n<li><code class=\"language-text\">resources</code> - pieces of software used by platforms,</li>\n<li><code class=\"language-text\">platforms</code> - Big Data platforms such as HDP or CDH.</li>\n</ul>\n<p><code class=\"language-text\">services</code> and <code class=\"language-text\">resources</code> share the same structure:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POSTGRESQL\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"versions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"9.6\"</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"10\"</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"https://download.postgresql.org/pub/repos/yum/10/redhat/rhel-7-x86_64/pgdg-centos10-10-2.noarch.rpm\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Each <code class=\"language-text\">service</code>/<code class=\"language-text\">resource</code> has several versions available and each version is associated with its repository. The default <code class=\"language-text\">versions.json</code> file uses the official repositories of each software.</p>\n<p><code class=\"language-text\">platforms</code> also have several versions, each of which is tied to a version of each <code class=\"language-text\">resource</code> it uses:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HDP\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"versions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"2.6.4.0\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HDP\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.6.4.0\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HDP_GPL\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.6.4.0\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HDP_UTILS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.1.0.22\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POSTGRESQL_JDBC_DRIVER\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"42.2.1\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>How to change the versions used?</h3>\n<p><code class=\"language-text\">services</code> and <code class=\"language-text\">platforms</code> have a <code class=\"language-text\">default</code> attribute, which is set to the latest version by default. Change this attribute to whatever version you want to use (the version has to be described in <code class=\"language-text\">versions</code>).</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POSTGRESQL\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"versions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"9.6\"</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"10\"</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"https://download.postgresql.org/pub/repos/yum/10/redhat/rhel-7-x86_64/pgdg-centos10-10-2.noarch.rpm\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"default\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"9.6\"</span> // set the version to use here\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>How to change the repositories used?</h3>\n<p>In <code class=\"language-text\">services</code> and <code class=\"language-text\">resources</code>, simply change the url associated with the version you are using. This can be useful to use private local repositories.</p>\n<h2>Kerberos</h2>\n<p>Jumbo supports the use of Kerberos to secure the cluster. <code class=\"language-text\">KERBEROS</code> is a Jumbo service with no component that can be added like any other service:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jumbo (mycluster) &gt; addservice KERBEROS</code></pre></div>\n<p>The cluster will be kerberized after the HDP installation.<br>\nIt is possible to disable it afterward within the Ambari UI.</p>\n<h2>Custom node types</h2>\n<p>In <code class=\"language-text\">jumbo/core/config/services.json</code>, the services are defined as follow:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ANSIBLE\"</span><span class=\"token punctuation\">,</span>\t\t\t\t  <span class=\"token comment\"># service name</span>\n\t<span class=\"token string\">\"components\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\t\t\t\t      <span class=\"token comment\"># list of the components of the service</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ANSIBLE_CLIENT\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># component name</span>\n\t\t\t<span class=\"token string\">\"hosts_types\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\t\t  <span class=\"token comment\"># node types on which the component...</span>\n\t\t\t\t<span class=\"token string\">\"edge\"</span>                <span class=\"token comment\"># ...can be installed</span>\n\t\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string\">\"abbr\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ANSIBLE_C\"</span><span class=\"token punctuation\">,</span>\t  <span class=\"token comment\"># component abbreviation</span>\n\t\t\t<span class=\"token string\">\"number\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\t\t\t  <span class=\"token comment\"># number needed in default mode</span>\n\t\t\t<span class=\"token string\">\"ha\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\t\t\t          <span class=\"token comment\"># number needed in HA mode</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"requirements\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"ram\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>                  <span class=\"token comment\"># not used yet</span>\n\t\t<span class=\"token string\">\"disk\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span>\t\t\t      <span class=\"token comment\"># not used yet</span>\n\t\t<span class=\"token string\">\"nodes\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\t\t\t\t\t  <span class=\"token comment\"># number of node of each type required...</span>\n\t\t\t<span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\t\t\t  <span class=\"token comment\"># ...for the service</span>\n\t\t\t\t<span class=\"token string\">\"edge\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string\">\"ha\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token string\">\"edge\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">\"services\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\t\t\t  <span class=\"token comment\"># other services on which the service depends</span>\n\t\t\t<span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token string\">\"ha\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"auto_install\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\t\t\t  <span class=\"token comment\"># clients that will always be installed</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A component can only be installed on nodes of <code class=\"language-text\">hosts_types</code> types. You might want to create custom types (e.g. to isolate a service). The node types are defined in the list <code class=\"language-text\">node_types</code>. To create a new type, add it to:</p>\n<ul>\n<li>the <code class=\"language-text\">node_types</code> list;</li>\n<li><code class=\"language-text\">hosts_types</code> lists of the components that you want to install on nodes of the new type.</li>\n</ul>\n<p><hint-box\n    type='info'\n    text='On auto-installation of a service, the components are added in priority to nodes of the first type of the `hosts_types` list.'\n    ></hint-box></p>","id":"c8eb77f0-d4d3-5d56-8715-ed9680c556de","frontmatter":{"title":"Advanced usage"}},"allMarkdownRemark":{"edges":[{"node":{"id":"dfacebff-7d12-5d9e-a6a0-904de2d228b8","frontmatter":{"title":"Getting started","sort":1},"fields":{"slug":"docs/getting-started/"}}},{"node":{"id":"84b64b39-9c4a-5b08-958b-fda2c3b9b93f","frontmatter":{"title":"Overview","sort":1},"fields":{"slug":"docs/"}}},{"node":{"id":"18643e17-c7d3-58fb-899f-85a55637ce16","frontmatter":{"title":"Jumbo CLI","sort":1},"fields":{"slug":"docs/commands/"}}},{"node":{"id":"be7a7cec-43f8-539b-8eb4-ef9e61f6571a","frontmatter":{"title":"Cluster commands","sort":2},"fields":{"slug":"docs/commands/cluster/"}}},{"node":{"id":"22c8d060-e9bf-55b3-8c14-4f20be9cd230","frontmatter":{"title":"Key principles","sort":2},"fields":{"slug":"docs/getting-started/key-principles/"}}},{"node":{"id":"93ce6522-81a0-5aec-8744-99c9b170343e","frontmatter":{"title":"Supported services and comp...","sort":2},"fields":{"slug":"docs/supported/"}}},{"node":{"id":"6d3e5922-3975-51c1-823f-ed8fe22aa362","frontmatter":{"title":"Service commands","sort":3},"fields":{"slug":"docs/commands/service/"}}},{"node":{"id":"ffadc381-86a0-5b02-a1d0-354d4e191d8e","frontmatter":{"title":"Node commands","sort":3},"fields":{"slug":"docs/commands/node/"}}},{"node":{"id":"14c1e223-d215-5831-8845-215e25c3be84","frontmatter":{"title":"Installation","sort":3},"fields":{"slug":"docs/getting-started/installation/"}}},{"node":{"id":"bec424b9-ea29-5fca-9c87-b384d7922e23","frontmatter":{"title":"Versions","sort":3},"fields":{"slug":"docs/versions/"}}},{"node":{"id":"6dca226f-2ed7-547f-aa41-e0b79b358812","frontmatter":{"title":"Cluster configuration","sort":4},"fields":{"slug":"docs/getting-started/configuration/"}}},{"node":{"id":"4a8a9459-ae42-5bbf-b405-7d814764041a","frontmatter":{"title":"Component commands","sort":5},"fields":{"slug":"docs/commands/component/"}}},{"node":{"id":"a49f40d9-49fa-58de-8c4d-ba610496cb5f","frontmatter":{"title":"Cluster provisioning","sort":5},"fields":{"slug":"docs/getting-started/provisioning/"}}},{"node":{"id":"c8eb77f0-d4d3-5d56-8715-ed9680c556de","frontmatter":{"title":"Advanced usage","sort":7},"fields":{"slug":"docs/advanced-usage/"}}}]}},"pageContext":{"slug":"docs/advanced-usage/"}}