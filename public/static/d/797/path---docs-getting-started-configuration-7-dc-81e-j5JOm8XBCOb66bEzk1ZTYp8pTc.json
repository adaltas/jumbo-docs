{"data":{"markdownRemark":{"html":"<h1>Cluster configuration</h1>\n<p>Now we are ready to create and configure our first cluster with Jumbo!</p>\n<h2>Cluster creation and Jumbo context</h2>\n<p>First, lets enter the Jumbo shell and create our cluster:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">[user@computer:~]$ jumbo\n</span>Jumbo v0.4.1\n<span class=\"gatsby-highlight-code-line\">jumbo > create mycluster\n</span>Creating mycluster...\nCluster \"mycluster\" created (domain name = \"mycluster.local\").\njumbo (mycluster) ></code></pre></div>\n<p>After creating a cluster, the <em>Jumbo context</em> is set to this cluster. You can see the name of the cluster loaded (<code class=\"language-text\">jumbo (mycluster) &gt;</code>). Use <code class=\"language-text\">exit</code> to reset the context, and then <code class=\"language-text\">use</code> to set the context to an existing cluster:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > exit\n</span><span class=\"gatsby-highlight-code-line\">jumbo > use anothercluster\n</span>Loading anothercluster...\nCluster \"anothercluster\" loaded.\njumbo (anothercluster) > </code></pre></div>\n<h3>If you are in a hurry, use templates</h3>\n<p>When creating a cluster, you can reference a template. The cluster will then be configured in one second:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo > create mycluster --template small-full\n</span>Creating mycluster...\nCluster \"mycluster\" created (domain name = \"mycluster.local\").\n<span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > listnodes\n</span>+----------+--------------------+-------------+----------+------+\n|   Name   |       Types        |      IP     | RAM (MB) | CPUs |\n+----------+--------------------+-------------+----------+------+\n|  edge01  |        edge        | 10.10.10.10 |   1024   |  1   |\n| master01 | master, sidemaster | 10.10.10.11 |   3072   |  1   |\n| worker01 |       worker       | 10.10.10.21 |   4096   |  2   |\n+----------+--------------------+-------------+----------+------+</code></pre></div>\n<p>If this is your first time using Jumbo, we recommend following this tutorial to learn everything you need to know, but you can jump straight to <a href=\"../provisioning\">Cluster provisioning</a> from here.<br>\nSee the list of available templates on the Github repo (<a href=\"https://github.com/adaltas/jumbo/tree/master/jumbo/core/config/templates/docs\">templates/docs</a>).</p>\n<h2>Virtual machine creation</h2>\n<p>Now that we have created our cluster, lets add 3 virtual machines to it:</p>\n<p><hint-box\n    type='warning'\n    text='Adjust the RAM of VMs to your local machine!'\n    ></hint-box></p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addnode master --types master --ip 10.10.10.11 --ram 2048\n</span>Machine \"master\" added to cluster \"mycluster\".\n<span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addnode smaster -t sidemaster -t edge\n</span>IP: 10.10.10.12\nRAM (MB): 3072\nMachine \"smaster\" added to cluster \"mycluster\".\n<span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addnode worker -t worker --cpus 2\n</span>IP: 10.10.10.13\nRAM (MB): 3072\nMachine \"worker\" added to cluster \"mycluster\".</code></pre></div>\n<p>We now have all the nodes needed to deploy a functional Hadoop cluster. Use <code class=\"language-text\">listnodes</code> to see details about the nodes of the cluster:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > listnodes\n</span>+---------+------------------+-------------+----------+------+\n|   Name  |      Types       |      IP     | RAM (MB) | CPUs |\n+---------+------------------+-------------+----------+------+\n|  master |      master      | 10.10.10.11 |   2048   |  1   |\n| smaster | sidemaster, edge | 10.10.10.12 |   3072   |  1   |\n|  worker |      worker      | 10.10.10.13 |   3072   |  2   |\n+---------+------------------+-------------+----------+------+</code></pre></div>\n<h2>Service installation</h2>\n<p>A service can have dependencies to other services. A dependency is satisfied if the required service is installed and if the minimum required number for each component is installed. If the requirements to install a service are not met, Jumbo will tell you what services or components you have to install:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addservice AMBARI\n</span>The requirements to add the service \"AMBARI\" are not met!\nThese services are missing:\n <span class=\"token list punctuation\">-</span> ANSIBLE,\n <span class=\"token list punctuation\">-</span> POSTGRESQL\n<span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addservice ANSIBLE\n</span>Service \"ANSIBLE\" and related clients added to cluster \"mycluster\".\n1 type of component auto-installed. Use \"listcomponents -a\" for details.</code></pre></div>\n<p>You can let Jumbo install all the dependencies with the tag <code class=\"language-text\">--recursive</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addservice AMBARI --recursive\n</span>The service AMBARI and its dependencies will be installed. Dependencies:\nServices:\n <span class=\"token list punctuation\">-</span> POSTGRESQL\n\nDo you want to continue? <span class=\"token url-reference url\"><span class=\"token punctuation\">[</span><span class=\"token variable\">y/N</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> y</span>\nService \"AMBARI\" and related clients added to cluster \"mycluster\".\nAuto-installed the dependencies:\nServices:\n <span class=\"token list punctuation\">-</span> POSTGRESQL\n2 type of component auto-installed. Use \"listcomponents -a\" for details.</code></pre></div>\n<p>When installing a service, all its components are auto-installed on the best fitting hosts by default. You can avoid the auto-installation with the flag <code class=\"language-text\">--no-auto</code>.</p>\n<p>Note that the service's clients will always be installed on all hosts (even with <code class=\"language-text\">--no-auto</code>) and on nodes created after the service installation. However you can use <code class=\"language-text\">rmcomponent</code> to delete them individually afterward.</p>\n<p>A list of all the services supported by Jumbo is available <a href=\"../../about/supported\">here</a>.</p>\n<p><hint-box\n    type='info'\n    text='**High Availability support**  \n    Some services support High Availability.  \n    To install a service in HA, use the tag `--ha` with the command `addservice`.'\n    ></hint-box></p>\n<h4>Component installation</h4>\n<p>If you choose to not auto-install the components with the flag <code class=\"language-text\">--no-auto</code>, you have to manually add components with <code class=\"language-text\">addcomponent</code> on the machines of your choice. Use the command <code class=\"language-text\">checkservice</code> to see what components are missing for the service to be complete:</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > checkservice HDFS\n</span>The service \"HDFS\" misses:\n <span class=\"token list punctuation\">-</span> 1 DATANODE\n<span class=\"gatsby-highlight-code-line\">jumbo (mycluster) > addcomponent DATANODE -m worker\n</span>Component \"DATANODE\" added to machine \"mycluster/worker\".</code></pre></div>\n<h2>Installation of all Hadoop services and components</h2>\n<p>We have to reproduce the same procedure of installation for the following services and components:</p>\n<table>\n<thead>\n<tr>\n<th>Service</th>\n<th>Components</th>\n<th>Machine type</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ANSIBLE</td>\n<td>ANSIBLE_CLIENT</td>\n<td><code class=\"language-text\">sidemaster</code></td>\n</tr>\n<tr>\n<td>POSTGRESQL</td>\n<td>PSQL_SERVER</td>\n<td><code class=\"language-text\">sidemaster</code></td>\n</tr>\n<tr>\n<td>AMBARI</td>\n<td>AMBARI_SERVER</td>\n<td><code class=\"language-text\">sidemaster</code></td>\n</tr>\n<tr>\n<td>HDFS</td>\n<td>NAMENODE</td>\n<td><code class=\"language-text\">master</code></td>\n</tr>\n<tr>\n<td></td>\n<td>SECONDARY_NAMENODE</td>\n<td><code class=\"language-text\">sidemaster</code></td>\n</tr>\n<tr>\n<td></td>\n<td>DATANODE</td>\n<td><code class=\"language-text\">worker</code></td>\n</tr>\n<tr>\n<td>ZOOKEEPER</td>\n<td>ZOOKEEPER_SERVER</td>\n<td><code class=\"language-text\">master</code></td>\n</tr>\n<tr>\n<td>YARN</td>\n<td>RESOURCEMANAGER</td>\n<td><code class=\"language-text\">master</code></td>\n</tr>\n<tr>\n<td></td>\n<td>APP<em>TIMELINE</em>SERVER</td>\n<td><code class=\"language-text\">edge</code></td>\n</tr>\n<tr>\n<td></td>\n<td>HISTORYSERVER</td>\n<td><code class=\"language-text\">edge</code></td>\n</tr>\n<tr>\n<td></td>\n<td>NODEMANAGER</td>\n<td><code class=\"language-text\">worker</code></td>\n</tr>\n<tr>\n<td>HIVE</td>\n<td>HIVE_METASTORE</td>\n<td><code class=\"language-text\">sidemaster</code></td>\n</tr>\n<tr>\n<td></td>\n<td>HIVE_SERVER</td>\n<td><code class=\"language-text\">edge</code></td>\n</tr>\n<tr>\n<td>HBASE</td>\n<td>HBASE_MASTER</td>\n<td><code class=\"language-text\">master</code></td>\n</tr>\n<tr>\n<td></td>\n<td>HBASE_REGIONSERVER</td>\n<td><code class=\"language-text\">worker</code></td>\n</tr>\n</tbody>\n</table>\n<h2>Remove items</h2>\n<p>Use the commands <code class=\"language-text\">rmnode</code>, <code class=\"language-text\">rmservice</code>, or <code class=\"language-text\">rmcomponent</code> to remove items.</p>\n<h2>See what have been installed</h2>\n<p>Jumbo has list commands to describe the cluster state:</p>\n<ul>\n<li><code class=\"language-text\">listclusters</code> to list all the clusters and the services installed on each of them;</li>\n<li><code class=\"language-text\">listnodes</code> to list the VMs and their configurations;</li>\n<li><code class=\"language-text\">listservices</code> to list the status of each service installed on a cluster (complete or not);</li>\n<li><code class=\"language-text\">listcomponents</code> to list the components installed on a machine.</li>\n</ul>","id":"6dca226f-2ed7-547f-aa41-e0b79b358812","frontmatter":{"title":"Cluster configuration"}},"allMarkdownRemark":{"edges":[{"node":{"id":"dfacebff-7d12-5d9e-a6a0-904de2d228b8","frontmatter":{"title":"Getting started","sort":1},"fields":{"slug":"docs/getting-started/"}}},{"node":{"id":"84b64b39-9c4a-5b08-958b-fda2c3b9b93f","frontmatter":{"title":"Overview","sort":1},"fields":{"slug":"docs/"}}},{"node":{"id":"18643e17-c7d3-58fb-899f-85a55637ce16","frontmatter":{"title":"Jumbo CLI","sort":1},"fields":{"slug":"docs/commands/"}}},{"node":{"id":"be7a7cec-43f8-539b-8eb4-ef9e61f6571a","frontmatter":{"title":"Cluster commands","sort":2},"fields":{"slug":"docs/commands/cluster/"}}},{"node":{"id":"22c8d060-e9bf-55b3-8c14-4f20be9cd230","frontmatter":{"title":"Key principles","sort":2},"fields":{"slug":"docs/getting-started/key-principles/"}}},{"node":{"id":"93ce6522-81a0-5aec-8744-99c9b170343e","frontmatter":{"title":"Supported services and comp...","sort":2},"fields":{"slug":"docs/supported/"}}},{"node":{"id":"6d3e5922-3975-51c1-823f-ed8fe22aa362","frontmatter":{"title":"Service commands","sort":3},"fields":{"slug":"docs/commands/service/"}}},{"node":{"id":"ffadc381-86a0-5b02-a1d0-354d4e191d8e","frontmatter":{"title":"Node commands","sort":3},"fields":{"slug":"docs/commands/node/"}}},{"node":{"id":"14c1e223-d215-5831-8845-215e25c3be84","frontmatter":{"title":"Installation","sort":3},"fields":{"slug":"docs/getting-started/installation/"}}},{"node":{"id":"6dca226f-2ed7-547f-aa41-e0b79b358812","frontmatter":{"title":"Cluster configuration","sort":4},"fields":{"slug":"docs/getting-started/configuration/"}}},{"node":{"id":"4a8a9459-ae42-5bbf-b405-7d814764041a","frontmatter":{"title":"Component commands","sort":5},"fields":{"slug":"docs/commands/component/"}}},{"node":{"id":"a49f40d9-49fa-58de-8c4d-ba610496cb5f","frontmatter":{"title":"Cluster provisioning","sort":5},"fields":{"slug":"docs/getting-started/provisioning/"}}},{"node":{"id":"c8eb77f0-d4d3-5d56-8715-ed9680c556de","frontmatter":{"title":"Advanced usage","sort":7},"fields":{"slug":"docs/advanced-usage/"}}}]}},"pageContext":{"slug":"docs/getting-started/configuration/"}}